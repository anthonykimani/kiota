/**
 * Mock Portfolio Data
 */

import {
  Portfolio,
  AssetType,
  AssetHolding,
  Transaction,
  TransactionType,
  TransactionStatus,
  AssetMetadata,
} from '@/types/models/portfolio';

export const mockAssetMetadata: Record<AssetType, AssetMetadata> = {
  [AssetType.USDM]: {
    type: AssetType.USDM,
    name: 'Mountain Protocol USD',
    symbol: 'USDM',
    description: 'Yield-bearing dollar token backed 1:1 by US Treasury Bills',
    category: 'yield',
    contractAddress: '0x59D9356E565Ab3A36dD77763Fc0d87fEaf85508C',
    chain: 'base',
    decimals: 18,
    yieldAPY: 5.0,
    averageReturn: null,
    volatility: 'none',
    liquidity: 'excellent',
    requiresKYC: false,
    minimumDeposit: 10,
    riskLevel: 'very-low',
    backingType: 'US Treasury Bills',
  },
  [AssetType.USDY]: {
    type: AssetType.USDY,
    name: 'Ondo US Dollar Yield',
    symbol: 'USDY',
    description: 'Yield-bearing stablecoin backed by short-term US Treasuries',
    category: 'yield',
    contractAddress: '0x96F6eF951840721AdBF46Ac996b59E0235CB985C',
    chain: 'ethereum',
    decimals: 18,
    yieldAPY: 5.1,
    averageReturn: null,
    volatility: 'none',
    liquidity: 'good',
    requiresKYC: true,
    minimumDeposit: 500,
    riskLevel: 'very-low',
    backingType: 'Short-term US Treasuries',
  },
  [AssetType.BCSPX]: {
    type: AssetType.BCSPX,
    name: 'Backed S&P 500',
    symbol: 'bCSPX',
    description: '1:1 backed by actual S&P 500 ETF shares',
    category: 'growth',
    contractAddress: '0x1234567890123456789012345678901234567890',
    chain: 'base',
    decimals: 18,
    yieldAPY: null,
    averageReturn: 10.0,
    volatility: 'high',
    liquidity: 'good',
    requiresKYC: true,
    minimumDeposit: 100,
    riskLevel: 'medium',
    backingType: 'S&P 500 ETF Shares',
  },
  [AssetType.PAXG]: {
    type: AssetType.PAXG,
    name: 'Paxos Gold',
    symbol: 'PAXG',
    description: 'Each token backed by one troy ounce of London Good Delivery gold',
    category: 'hedge',
    contractAddress: '0x45804880De22913dAFE09f4980848ECE6EcbAf78',
    chain: 'ethereum',
    decimals: 18,
    yieldAPY: null,
    averageReturn: 6.0,
    volatility: 'low',
    liquidity: 'excellent',
    requiresKYC: false,
    minimumDeposit: 50,
    riskLevel: 'low',
    backingType: 'Physical Gold',
  },
  [AssetType.BTC]: {
    type: AssetType.BTC,
    name: 'Bitcoin',
    symbol: 'BTC',
    description: 'Digital currency and store of value',
    category: 'speculative',
    contractAddress: '0x0000000000000000000000000000000000000000',
    chain: 'base',
    decimals: 8,
    yieldAPY: null,
    averageReturn: null,
    volatility: 'very-high',
    liquidity: 'excellent',
    requiresKYC: false,
    minimumDeposit: 10,
    riskLevel: 'very-high',
    backingType: 'Decentralized Network',
  },
  [AssetType.ETH]: {
    type: AssetType.ETH,
    name: 'Ethereum',
    symbol: 'ETH',
    description: 'Smart contract platform and digital currency',
    category: 'speculative',
    contractAddress: '0x0000000000000000000000000000000000000000',
    chain: 'ethereum',
    decimals: 18,
    yieldAPY: 3.5,
    averageReturn: null,
    volatility: 'very-high',
    liquidity: 'excellent',
    requiresKYC: false,
    minimumDeposit: 10,
    riskLevel: 'very-high',
    backingType: 'Decentralized Network',
  },
  [AssetType.OUSG]: {
    type: AssetType.OUSG,
    name: 'Ondo Short-Term US Government Treasuries',
    symbol: 'OUSG',
    description: 'Institutional-grade US Treasury exposure',
    category: 'yield',
    contractAddress: '0x1B19C19393e2d034D8Ff31ff34c81252FcBbee92',
    chain: 'ethereum',
    decimals: 18,
    yieldAPY: 4.8,
    averageReturn: null,
    volatility: 'none',
    liquidity: 'medium',
    requiresKYC: true,
    minimumDeposit: 5000,
    riskLevel: 'very-low',
    backingType: 'US Treasury Securities',
  },
};

export const mockPortfolios: Portfolio[] = [
  {
    id: 'portfolio-1',
    userId: 'user-1',
    totalValueUSD: 2885.43,
    totalValueKES: 375106,

    holdings: [
      {
        asset: AssetType.USDM,
        amountUSD: 2230.49,
        amountTokens: 2230.49,
        percentageOfPortfolio: 77.3,
        entryPriceUSD: 1.0,
        currentPriceUSD: 1.0,
        unrealizedGainUSD: 30.49,
        unrealizedGainPercent: 1.39,
        dailyChangeUSD: 0.31,
        dailyChangePercent: 0.01,
        monthlyYield: 9.29,
        updatedAt: new Date('2026-01-05'),
      },
      {
        asset: AssetType.BCSPX,
        amountUSD: 555.72,
        amountTokens: 1.24,
        percentageOfPortfolio: 19.3,
        entryPriceUSD: 445.0,
        currentPriceUSD: 448.2,
        unrealizedGainUSD: 5.72,
        unrealizedGainPercent: 1.04,
        dailyChangeUSD: 1.12,
        dailyChangePercent: 0.20,
        monthlyYield: 0,
        updatedAt: new Date('2026-01-05'),
      },
      {
        asset: AssetType.PAXG,
        amountUSD: 99.23,
        amountTokens: 0.047,
        percentageOfPortfolio: 3.4,
        entryPriceUSD: 2100.0,
        currentPriceUSD: 2111.27,
        unrealizedGainUSD: 1.91,
        unrealizedGainPercent: 1.96,
        dailyChangeUSD: 0.21,
        dailyChangePercent: 0.21,
        monthlyYield: 0,
        updatedAt: new Date('2026-01-05'),
      },
    ],

    allTimeReturnPercent: 4.6,
    allTimeReturnUSD: 127.41,
    monthlyReturnPercent: 0.8,
    monthlyReturnUSD: 24.0,

    currentAllocation: {
      USDM: 77.3,
      bCSPX: 19.3,
      PAXG: 3.4,
    },
    targetAllocation: {
      USDM: 80,
      bCSPX: 15,
      PAXG: 5,
    },
    driftPercentage: 5.8,
    needsRebalancing: true,

    updatedAt: new Date('2026-01-05'),
  },
];

export const mockTransactions: Transaction[] = [
  {
    id: 'tx-1',
    userId: 'user-1',
    type: TransactionType.DEPOSIT,
    status: TransactionStatus.COMPLETED,
    amountKES: 5050,
    amountUSD: 38.11,
    feeKES: 50,
    feeUSD: 0.39,
    asset: AssetType.USDM,
    tokenAmount: 30.49,
    pricePerToken: 1.0,
    transactionHash: '0xabc123...',
    mpesaTransactionId: 'QAB1C2D3E4',
    description: 'M-Pesa deposit',
    createdAt: new Date('2026-01-05T10:30:00'),
    completedAt: new Date('2026-01-05T10:33:00'),
  },
  {
    id: 'tx-2',
    userId: 'user-1',
    type: TransactionType.DEPOSIT,
    status: TransactionStatus.COMPLETED,
    amountKES: 10100,
    amountUSD: 76.50,
    feeKES: 100,
    feeUSD: 0.77,
    asset: AssetType.USDM,
    tokenAmount: 61.20,
    pricePerToken: 1.0,
    transactionHash: '0xdef456...',
    mpesaTransactionId: 'QAB2C3D4E5',
    description: 'M-Pesa deposit',
    createdAt: new Date('2025-12-28T14:15:00'),
    completedAt: new Date('2025-12-28T14:18:00'),
  },
  {
    id: 'tx-3',
    userId: 'user-1',
    type: TransactionType.SWAP,
    status: TransactionStatus.COMPLETED,
    amountKES: null,
    amountUSD: 75.0,
    feeKES: null,
    feeUSD: 0.38,
    asset: AssetType.BCSPX,
    tokenAmount: 0.168,
    pricePerToken: 446.43,
    transactionHash: '0xghi789...',
    mpesaTransactionId: null,
    description: 'Swap USDM â†’ bCSPX',
    createdAt: new Date('2025-12-28T14:20:00'),
    completedAt: new Date('2025-12-28T14:21:00'),
  },
];

export function getMockPortfolio(userId: string): Portfolio | null {
  return mockPortfolios.find((p) => p.userId === userId) || null;
}

export function getMockTransactions(userId: string, limit: number = 10): Transaction[] {
  return mockTransactions
    .filter((t) => t.userId === userId)
    .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())
    .slice(0, limit);
}
